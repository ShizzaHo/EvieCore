[[Назад]](./main.md)

# TriggerManager <span style="font-size: 10px">[EvieCore/module]</span>

## Описание 
`TriggerManager` — это класс, предназначенный для управления состоянием триггеров вашего проекта. Он позволяет добавлять, изменять и отслеживать состояния различных триггеров (переменных типа `bool`), что полезно для создания событийных систем в игре или управления логикой взаимодействий.
### Основные функции: 
 
1. **Добавление триггера** : добавление нового триггера с указанным состоянием.
 
2. **Изменение состояния триггера** : изменение состояния существующего триггера.
 
3. **Получение состояния триггера** : получение текущего состояния триггера.
 
4. **Получение всех триггеров** : получение списка всех добавленных триггеров.
Кроме того, класс использует паттерн "Одиночка" (Singleton), что позволяет работать с единственным экземпляром `TriggerManager` на протяжении всей игры.
## Классы и интерфейсы 
`TriggerManager``TriggerManager` — основной класс, предоставляющий функциональность для работы с триггерами.
#### Свойства: 
 
- **Instance (static)** : 
  - Тип: `TriggerManager`
 
  - Описание: Статическое свойство, которое обеспечивает доступ к единственному экземпляру `TriggerManager`. Если экземпляр уже существует, он возвращается, иначе создается новый.

#### Методы: 
 
- **`AddTrigger(string triggerName, bool initialState = false)`** :
  - Описание: Добавляет новый триггер с заданным именем и начальным состоянием. Если триггер с таким именем уже существует, выводится предупреждение.
 
  - Параметры: 
    - `triggerName` (string): Имя триггера.
 
    - `initialState` (bool): Начальное состояние триггера (по умолчанию `false`).
 
- **`SetTriggerState(string triggerName, bool state)`** :
  - Описание: Устанавливает новое состояние для существующего триггера. Если триггер с таким именем не найден, выводится ошибка.
 
  - Параметры: 
    - `triggerName` (string): Имя триггера.
 
    - `state` (bool): Новое состояние триггера.
 
- **`GetTriggerState(string triggerName)`** : 
  - Описание: Возвращает текущее состояние триггера. Если триггер не найден, выводится ошибка и возвращается `false`.
 
  - Параметры: 
    - `triggerName` (string): Имя триггера.
 
  - Возвращаемое значение: 
    - Тип: `bool`

    - Описание: Состояние триггера.
 
- **`GetAllTriggers()`** :
  - Описание: Возвращает список всех имен триггеров, которые были добавлены в систему.
 
  - Возвращаемое значение: 
    - Тип: `List<string>`

    - Описание: Список строк, содержащий имена всех триггеров.

## Пример использования 


```csharp
using UnityEngine;

public class GameManager : MonoBehaviour
{
    private void Start()
    {
        // Добавляем триггеры
        TriggerManager.Instance.AddTrigger("PlayerEnterArea", true);
        TriggerManager.Instance.AddTrigger("EnemyDefeated", false);
        
        // Проверяем состояние триггера
        bool playerInArea = TriggerManager.Instance.GetTriggerState("PlayerEnterArea");
        Debug.Log("Player in area: " + playerInArea);

        // Изменяем состояние триггера
        TriggerManager.Instance.SetTriggerState("PlayerEnterArea", false);
        
        // Получаем и выводим все триггеры
        var triggers = TriggerManager.Instance.GetAllTriggers();
        foreach (var trigger in triggers)
        {
            Debug.Log("Trigger: " + trigger);
        }
    }
}
```

### Пояснение: 
 
1. В начале создаются два триггера: `PlayerEnterArea` с начальным состоянием `true` и `EnemyDefeated` с состоянием `false`.
 
2. Мы получаем состояние триггера `PlayerEnterArea` и выводим его в консоль.
 
3. Состояние триггера `PlayerEnterArea` изменяется на `false`.

4. Получаем и выводим все имена триггеров, добавленных в систему.

## Заключение 
`TriggerManager` является удобным инструментом для управления состоянием триггеров в Unity. Он позволяет эффективно добавлять, изменять и отслеживать состояния различных логических переменных, что делает его полезным в разработке событийных систем, систем взаимодействий и других сценариев, требующих отслеживания условий и состояний. Использование паттерна "Одиночка" обеспечивает доступ к единому экземпляру менеджера на протяжении всей игры, что упрощает архитектуру и предотвращает создание нескольких ненужных экземпляров класса.