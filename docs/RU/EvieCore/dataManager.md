[[Назад]](./main.md)

# DataManager <span style="font-size: 10px">[EvieCore/module]</span>

## Описание 
`DataManager` — это класс-менеджер для хранения и управления данными в Unity. Он использует словарь (`Dictionary<string, object>`) для хранения пар "ключ-значение", где ключ представляет собой строку, а значение — объект любого типа. Класс реализует паттерн **Singleton** , что означает, что существует только один экземпляр этого класса в пределах игры, и он доступен через статическое свойство `Instance`.
### Основные функции: 

- Сохранение и извлечение данных с помощью ключей.

- Проверка наличия данных по ключу.

- Удаление данных.

- Очистка всех данных.

- Обработка типов данных с проверкой и кастом выводом ошибок при неправильном типе.

## Классы и Интерфейсы 
1. **DataManager** 
Это главный класс, который отвечает за управление данными в игре. Он предоставляет следующие методы:

#### Свойства: 
 
- `public static DataManager Instance { get; private set; }` — Статическое свойство, которое возвращает единственный экземпляр `DataManager`. Паттерн Singleton гарантирует, что экземпляр будет только один, и он будет доступен глобально.

#### Методы: 
 
- `void Awake()` — Метод, который инициализирует экземпляр `DataManager` и гарантирует, что создается только один объект этого класса.
 
- `public void SetData<T>(string key, T value)` — Метод для сохранения данных. Он принимает ключ (строку) и значение (объект типа `T`). Если ключ уже существует, то значение будет обновлено, если нет — новый элемент будет добавлен.
 
- `public T GetData<T>(string key)` — Метод для получения данных по ключу. Возвращает значение типа `T`, если оно существует, или значение по умолчанию, если ключ не найден.
 
- `public bool ContainsKey(string key)` — Метод для проверки существования ключа в хранилище данных.
 
- `public void RemoveData(string key)` — Метод для удаления данных по ключу.
 
- `public void ClearAllData()` — Метод для очистки всех данных.

#### Внутренние поля: 
 
- `private Dictionary<string, object> dataStore = new Dictionary<string, object>();` — Словарь для хранения данных, где ключ — строка, а значение — объект любого типа.


---


## Пример использования 

### Сохранение данных: 


```csharp
// Сохранение значения типа int с ключом "playerScore"
DataManager.Instance.SetData("playerScore", 100);

// Сохранение значения типа string с ключом "playerName"
DataManager.Instance.SetData("playerName", "Alice");
```

### Извлечение данных: 


```csharp
// Получение значения типа int по ключу "playerScore"
int score = DataManager.Instance.GetData<int>("playerScore");

// Получение значения типа string по ключу "playerName"
string playerName = DataManager.Instance.GetData<string>("playerName");
```

### Проверка наличия данных: 


```csharp
// Проверка наличия данных по ключу "playerScore"
bool hasScore = DataManager.Instance.ContainsKey("playerScore");

// Проверка наличия данных по ключу "playerName"
bool hasPlayerName = DataManager.Instance.ContainsKey("playerName");
```

### Удаление данных: 


```csharp
// Удаление данных по ключу "playerScore"
DataManager.Instance.RemoveData("playerScore");
```

### Очистка всех данных: 


```csharp
// Очистка всех данных
DataManager.Instance.ClearAllData();
```

### Пример использования с неверным типом: 


```csharp
// Пример неправильного использования — пытаемся извлечь int, но данные сохранены как string
string incorrect = DataManager.Instance.GetData<int>("playerName");
```

Этот вызов выведет предупреждение в консоль о том, что тип данных не совпадает с ожидаемым.


---

### Ограничения: 
 
- **Использование типа `object`**  может привести к ошибкам времени выполнения при несоответствии типов данных.
 
- **Потенциальное увеличение памяти**  при хранении большого объема данных, поскольку `object` требует упаковки значений типа-значения.

Этот класс идеально подходит для небольших и средних проектов, где требуется простое, но эффективное управление данными без необходимости в сложных структурах данных или базе данных.