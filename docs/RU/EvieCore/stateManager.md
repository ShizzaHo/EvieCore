[[Назад]](./main.md)

# StateManager <span style="font-size: 10px">[EvieCore/module]</span>

## Описание 

Класс `StateManager` предоставляет централизованный способ управления состояниями в игре или приложении. Он реализует шаблон проектирования Singleton, что позволяет использовать его глобально в проекте. С помощью этого класса вы можете управлять списком возможных состояний, устанавливать текущее состояние и проверять, соответствует ли текущее состояние определённому значению.

## Классы и Интерфейсы

Класс `StateManager` - основной класс, отвечающий за управление состояниями.

#### Свойства: 
 
- **`Instance`**  *(static)*: Статическая ссылка на единственный экземпляр `StateManager`. Позволяет обращаться к классу глобально.
 
- **`states`**  ***`states`**  (private List<string>)*: Список возможных состояний. Заполняется в редакторе через `Inspector`.
 
- **`currentState`**  *(private string)*: Текущее активное состояние.

### Методы: 
 
- **`Awake()`** : Реализует Singleton, предотвращая создание нескольких экземпляров класса.
 
- **`Start()`** : Устанавливает первое состояние из списка как текущее при запуске.
 
- **`SetState(string newState)`** : Устанавливает переданное состояние как текущее, если оно присутствует в списке `states`.
  - Выводит предупреждение, если состояние отсутствует.
 
- **`GetCurrentState()`**  *(string)*: Возвращает текущее состояние.
 
- **`IsCurrentState(string state)`**  *(bool)*: Проверяет, совпадает ли переданное состояние с текущим.
 
- **`AddState(string newState)`** : Добавляет новое состояние в список, если оно отсутствует.
  - Выводит предупреждение, если состояние уже существует.

---

## Пример использования

```csharp
using UnityEngine;

public class ExampleUsage : MonoBehaviour
{
    private void Start()
    {
        // Доступ к экземпляру StateManager
        StateManager stateManager = StateManager.Instance;

        // Добавление нового состояния
        stateManager.AddState("Combat");
        stateManager.AddState("Exploration");

        // Установка начального состояния
        stateManager.SetState("Exploration");

        // Проверка текущего состояния
        if (stateManager.IsCurrentState("Exploration"))
        {
            Debug.Log("Игрок находится в режиме исследования.");
        }

        // Смена состояния
        stateManager.SetState("Combat");

        // Получение текущего состояния
        string currentState = stateManager.GetCurrentState();
        Debug.Log($"Текущее состояние: {currentState}");

        // Попытка установки неизвестного состояния
        stateManager.SetState("Stealth"); // Выведет предупреждение
    }
}
```


---

## Заключение

Класс `StateManager` — это простой и гибкий инструмент для управления состояниями в проекте Unity. Он удобен для создания систем, где требуется отслеживание текущего состояния, например, в игровом процессе (режимы боя, исследования, меню и т. д.) или интерфейсе пользователя. Использование паттерна Singleton упрощает доступ к классу из любого места в коде, минимизируя необходимость в сложных связях между объектами.
